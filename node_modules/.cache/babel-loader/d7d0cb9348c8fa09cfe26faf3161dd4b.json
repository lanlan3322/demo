{"ast":null,"code":"import _regeneratorRuntime from\"/Users/vina/Documents/GitHub/demo/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/vina/Documents/GitHub/demo/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/vina/Documents/GitHub/demo/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Navbar from\"./Navbar\";import NFTTile from\"./NFTTile\";import MarketplaceJSON from\"../Marketplace.json\";import axios from\"axios\";import{useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Marketplace(){var sampleData=[{\"name\":\"301NFT demo\",\"description\":\"301NFT demo\",\"website\":\"https://301NFT.io\",\"image\":\"https://gateway.pinata.cloud/ipfs/QmYcF3RiiMaPmDSavpoZRKoXZG257rndLdfkpcbxHTmBsR\",\"price\":\"0.001ETH\",\"twitter\":\"@301NFT\",\"linkedin\":\"301NFTlinkedin\",\"email\":\"301NFT@301NFT.io\",\"currentlySelling\":\"True\",\"address\":\"0xe81Bf5A757CB4f7F82a2F23b1e59bE45c33c5b13\"}];var _useState=useState(sampleData),_useState2=_slicedToArray(_useState,2),data=_useState2[0],updateData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),dataFetched=_useState4[0],updateFetched=_useState4[1];function getAllNFTs(){return _getAllNFTs.apply(this,arguments);}function _getAllNFTs(){_getAllNFTs=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var ethers,provider,signer,addr,contract,transaction,items;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:ethers=require(\"ethers\");//After adding your Hardhat network to your metamask, this code will get providers and signers\nprovider=new ethers.providers.Web3Provider(window.ethereum);signer=provider.getSigner();_context2.next=5;return signer.getAddress();case 5:addr=_context2.sent;//Pull the deployed contract instance\ncontract=new ethers.Contract(MarketplaceJSON.address,MarketplaceJSON.abi,signer);//create an NFT Token\n_context2.next=9;return contract.getAllNFTs();case 9:transaction=_context2.sent;_context2.next=12;return Promise.all(transaction.map(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(i){var tokenURI,meta,price,item;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return contract.tokenURI(i.tokenId);case 2:tokenURI=_context.sent;_context.next=5;return axios.get(tokenURI);case 5:meta=_context.sent;meta=meta.data;price=ethers.utils.formatUnits(i.price.toString(),'ether');item={price:price,tokenId:i.tokenId.toNumber(),seller:i.seller,owner:i.owner,image:meta.image,name:meta.name,description:meta.description,currAddress:addr};return _context.abrupt(\"return\",item);case 10:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}()));case 12:items=_context2.sent;updateFetched(true);updateData(items);case 15:case\"end\":return _context2.stop();}}},_callee2);}));return _getAllNFTs.apply(this,arguments);}if(!dataFetched)getAllNFTs();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col place-items-center mt-20\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"md:text-xl font-bold text-white\",children:\"Hall of 301NFTs\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex mt-5 justify-between flex-wrap max-w-screen-xl text-center\",children:data.map(function(value,index){return/*#__PURE__*/_jsx(NFTTile,{data:value},index);})})]})]});}","map":{"version":3,"names":["Navbar","NFTTile","MarketplaceJSON","axios","useState","Marketplace","sampleData","data","updateData","dataFetched","updateFetched","getAllNFTs","ethers","require","provider","providers","Web3Provider","window","ethereum","signer","getSigner","getAddress","addr","contract","Contract","address","abi","transaction","Promise","all","map","i","tokenURI","tokenId","get","meta","price","utils","formatUnits","toString","item","toNumber","seller","owner","image","name","description","currAddress","items","value","index"],"sources":["/Users/vina/Documents/GitHub/demo/src/components/Marketplace.js"],"sourcesContent":["import Navbar from \"./Navbar\";\nimport NFTTile from \"./NFTTile\";\nimport MarketplaceJSON from \"../Marketplace.json\";\nimport axios from \"axios\";\nimport { useState } from \"react\";\n\nexport default function Marketplace() {\nconst sampleData = [\n    {\n        \"name\": \"301NFT demo\",\n        \"description\": \"301NFT demo\",\n        \"website\":\"https://301NFT.io\",\n        \"image\":\"https://gateway.pinata.cloud/ipfs/QmYcF3RiiMaPmDSavpoZRKoXZG257rndLdfkpcbxHTmBsR\",\n        \"price\":\"0.001ETH\",\n        \"twitter\":\"@301NFT\",\n        \"linkedin\":\"301NFTlinkedin\",\n        \"email\":\"301NFT@301NFT.io\",\n        \"currentlySelling\":\"True\",\n        \"address\":\"0xe81Bf5A757CB4f7F82a2F23b1e59bE45c33c5b13\",\n    },\n];\nconst [data, updateData] = useState(sampleData);\nconst [dataFetched, updateFetched] = useState(false);\n\nasync function getAllNFTs() {\n    const ethers = require(\"ethers\");\n    //After adding your Hardhat network to your metamask, this code will get providers and signers\n    const provider = new ethers.providers.Web3Provider(window.ethereum);\n    const signer = provider.getSigner();\n    const addr = await signer.getAddress();\n    //Pull the deployed contract instance\n    let contract = new ethers.Contract(MarketplaceJSON.address, MarketplaceJSON.abi, signer)\n    //create an NFT Token\n    let transaction = await contract.getAllNFTs()\n\n    //Fetch all the details of every NFT from the contract and display\n    const items = await Promise.all(transaction.map(async i => {\n        const tokenURI = await contract.tokenURI(i.tokenId);\n        let meta = await axios.get(tokenURI);\n        meta = meta.data;\n\n        let price = ethers.utils.formatUnits(i.price.toString(), 'ether');\n        let item = {\n            price,\n            tokenId: i.tokenId.toNumber(),\n            seller: i.seller,\n            owner: i.owner,\n            image: meta.image,\n            name: meta.name,\n            description: meta.description,\n            currAddress:addr,\n        }\n        return item;\n    }))\n\n    updateFetched(true);\n    updateData(items);\n}\n\nif(!dataFetched)\n    getAllNFTs();\n\nreturn (\n    <div>\n        <Navbar></Navbar>\n        <div className=\"flex flex-col place-items-center mt-20\">\n            <div className=\"md:text-xl font-bold text-white\">\n                Hall of 301NFTs\n            </div>\n            <div className=\"flex mt-5 justify-between flex-wrap max-w-screen-xl text-center\">\n                {data.map((value, index) => {\n                    return <NFTTile data={value} key={index}></NFTTile>;\n                })}\n            </div>\n        </div>            \n    </div>\n);\n\n}"],"mappings":"qXAAA,MAAOA,OAAP,KAAmB,UAAnB,CACA,MAAOC,QAAP,KAAoB,WAApB,CACA,MAAOC,gBAAP,KAA4B,qBAA5B,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,KAAyB,OAAzB,C,wFAEA,cAAe,SAASC,YAAT,EAAuB,CACtC,GAAMC,WAAU,CAAG,CACf,CACI,OAAQ,aADZ,CAEI,cAAe,aAFnB,CAGI,UAAU,mBAHd,CAII,QAAQ,kFAJZ,CAKI,QAAQ,UALZ,CAMI,UAAU,SANd,CAOI,WAAW,gBAPf,CAQI,QAAQ,kBARZ,CASI,mBAAmB,MATvB,CAUI,UAAU,4CAVd,CADe,CAAnB,CAcA,cAA2BF,QAAQ,CAACE,UAAD,CAAnC,wCAAOC,IAAP,eAAaC,UAAb,eACA,eAAqCJ,QAAQ,CAAC,KAAD,CAA7C,yCAAOK,WAAP,eAAoBC,aAApB,eAhBsC,QAkBvBC,WAlBuB,0IAkBtC,qMACUC,MADV,CACmBC,OAAO,CAAC,QAAD,CAD1B,CAEI;AACMC,QAHV,CAGqB,GAAIF,OAAM,CAACG,SAAP,CAAiBC,YAArB,CAAkCC,MAAM,CAACC,QAAzC,CAHrB,CAIUC,MAJV,CAImBL,QAAQ,CAACM,SAAT,EAJnB,wBAKuBD,OAAM,CAACE,UAAP,EALvB,QAKUC,IALV,gBAMI;AACIC,QAPR,CAOmB,GAAIX,OAAM,CAACY,QAAX,CAAoBtB,eAAe,CAACuB,OAApC,CAA6CvB,eAAe,CAACwB,GAA7D,CAAkEP,MAAlE,CAPnB,CAQI;AARJ,uBAS4BI,SAAQ,CAACZ,UAAT,EAT5B,QASQgB,WATR,wCAYwBC,QAAO,CAACC,GAAR,CAAYF,WAAW,CAACG,GAAZ,4FAAgB,iBAAMC,CAAN,uKACrBR,SAAQ,CAACS,QAAT,CAAkBD,CAAC,CAACE,OAApB,CADqB,QACtCD,QADsC,qCAE3B7B,MAAK,CAAC+B,GAAN,CAAUF,QAAV,CAF2B,QAExCG,IAFwC,eAG5CA,IAAI,CAAGA,IAAI,CAAC5B,IAAZ,CAEI6B,KALwC,CAKhCxB,MAAM,CAACyB,KAAP,CAAaC,WAAb,CAAyBP,CAAC,CAACK,KAAF,CAAQG,QAAR,EAAzB,CAA6C,OAA7C,CALgC,CAMxCC,IANwC,CAMjC,CACPJ,KAAK,CAALA,KADO,CAEPH,OAAO,CAAEF,CAAC,CAACE,OAAF,CAAUQ,QAAV,EAFF,CAGPC,MAAM,CAAEX,CAAC,CAACW,MAHH,CAIPC,KAAK,CAAEZ,CAAC,CAACY,KAJF,CAKPC,KAAK,CAAET,IAAI,CAACS,KALL,CAMPC,IAAI,CAAEV,IAAI,CAACU,IANJ,CAOPC,WAAW,CAAEX,IAAI,CAACW,WAPX,CAQPC,WAAW,CAACzB,IARL,CANiC,iCAgBrCkB,IAhBqC,yDAAhB,+DAAZ,CAZxB,SAYUQ,KAZV,gBA+BItC,aAAa,CAAC,IAAD,CAAb,CACAF,UAAU,CAACwC,KAAD,CAAV,CAhCJ,yDAlBsC,6CAqDtC,GAAG,CAACvC,WAAJ,CACIE,UAAU,GAEd,mBACI,oCACI,KAAC,MAAD,IADJ,cAEI,aAAK,SAAS,CAAC,wCAAf,wBACI,YAAK,SAAS,CAAC,iCAAf,6BADJ,cAII,YAAK,SAAS,CAAC,iEAAf,UACKJ,IAAI,CAACuB,GAAL,CAAS,SAACmB,KAAD,CAAQC,KAAR,CAAkB,CACxB,mBAAO,KAAC,OAAD,EAAS,IAAI,CAAED,KAAf,EAA2BC,KAA3B,CAAP,CACH,CAFA,CADL,EAJJ,GAFJ,GADJ,CAgBC"},"metadata":{},"sourceType":"module"}